# Vue.nextTick(callback)
## 定義
在下次 DOM 更新循環結束之後執行延遲回調。在修改數據之後立即使用這個方法，獲取更新後的 DOM。

所以就衍生出了這個獲取更新後的DOM的Vue方法。所以放在Vue.nextTick()回調函數中的執行的應該是會對DOM進行操作的 js代碼；

理解：nextTick()，是將回調函數延遲在下一次dom更新數據後調用，簡單的理解是：當數據更新了，在dom中渲染後，自動執行該函數，

注意：Vue 實現響應式並不是數據發生變化之後 DOM 立即變化，而是按一定的策略進行 DOM 的更新。$nextTick 是在下次 DOM 更新循環結束之後執行延遲回調，在修改數據之後使用 $nextTick，則可以在回調中獲取更新後的 DOM，

## 使用時機
1、Vue生命周期的created()鉤子函數進行的DOM操作一定要放在Vue.nextTick()的回調函數中，原因是在created()鉤子函數執行的時候DOM 其實並未進行任何渲染，而此時進行DOM操作無異於徒勞，所以此處一定要將DOM操作的js代碼放進Vue.nextTick()的回調函數中。與之對應的就是mounted鉤子函數，因為該鉤子函數執行時所有的DOM掛載已完成。

2、當項目中你想在改變DOM元素的數據後基於新的dom做點什麽，對新DOM一系列的js操作都需要放進Vue.nextTick()的回調函數中；通俗的理解是：更改數據後當你想立即使用js操作新的視圖的時候需要使用它，正確的用法是：vue改變dom元素結構後使用vue.$nextTick()方法來實現dom數據更新後延遲執行後續代碼

3、在使用某個第三方插件時 ，希望在vue生成的某些dom動態發生變化時重新應用該插件，也會用到該方法，這時候就需要在 $nextTick 的回調函數中執行重新應用插件的方法。

## 原理
原因是，Vue是異步執行dom更新的，一旦觀察到數據變化，Vue就會開啟一個隊列，然後把在同一個事件循環 (event loop) 當中觀察到數據變化的 watcher 推送進這個隊列。如果這個watcher被觸發多次，只會被推送到隊列一次。這種緩沖行為可以有效的去掉重覆數據造成的不必要的計算和DOm操作。而在下一個事件循環時，Vue會清空隊列，並進行必要的DOM更新。
當你設置 vm.someData = 'new value'，DOM 並不會馬上更新，而是在異步隊列被清除，也就是下一個事件循環開始時執行更新時才會進行必要的DOM更新。如果此時你想要根據更新的 DOM 狀態去做某些事情，就會出現問題。。為了在數據變化之後等待 Vue 完成更新 DOM ，可以在數據變化之後立即使用 Vue.nextTick(callback) 。這樣回調函數在 DOM 更新完成後就會調用。

## 在組件中的調用方法
```js
this.$nextTick(()=>{
    // do something
});
```

## 參考
版權聲明：本文為CSDN博主「廣積糧緩稱王」的原創文章，遵循CC 4.0 BY-SA版權協議，轉載請附上原文出處鏈接及本聲明。
原文鏈接：https://blog.csdn.net/zhouzuoluo/article/details/84752280